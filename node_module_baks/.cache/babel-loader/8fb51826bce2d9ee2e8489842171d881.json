{"ast":null,"code":"import { __awaiter, __generator } from \"tslib\";\nimport { r as registerInstance, f as readTask, c as writeTask, j as forceUpdate, h, H as Host, i as getElement } from \"./index-e806d1f6.js\";\nvar CELL_TYPE_ITEM = \"item\";\nvar CELL_TYPE_HEADER = \"header\";\nvar CELL_TYPE_FOOTER = \"footer\";\nvar NODE_CHANGE_NONE = 0;\nvar NODE_CHANGE_POSITION = 1;\nvar NODE_CHANGE_CELL = 2;\nvar MIN_READS = 2;\n\nvar updateVDom = function updateVDom(t, e, i, r) {\n  for (var n = 0, s = t; n < s.length; n++) {\n    var a = s[n];\n    a.change = NODE_CHANGE_NONE;\n    a.d = true;\n  }\n\n  var o = [];\n  var l = r.offset + r.length;\n\n  var h = function h(r) {\n    var n = i[r];\n    var s = t.find(function (t) {\n      return t.d && t.cell === n;\n    });\n\n    if (s) {\n      var a = e[r];\n\n      if (a !== s.top) {\n        s.top = a;\n        s.change = NODE_CHANGE_POSITION;\n      }\n\n      s.d = false;\n    } else {\n      o.push(n);\n    }\n  };\n\n  for (var c = r.offset; c < l; c++) {\n    h(c);\n  }\n\n  var u = t.filter(function (t) {\n    return t.d;\n  });\n\n  var f = function f(i) {\n    var r = u.find(function (t) {\n      return t.d && t.cell.type === i.type;\n    });\n    var n = i.i;\n\n    if (r) {\n      r.d = false;\n      r.change = NODE_CHANGE_CELL;\n      r.cell = i;\n      r.top = e[n];\n    } else {\n      t.push({\n        d: false,\n        cell: i,\n        visible: true,\n        change: NODE_CHANGE_CELL,\n        top: e[n]\n      });\n    }\n  };\n\n  for (var d = 0, p = o; d < p.length; d++) {\n    var v = p[d];\n    f(v);\n  }\n\n  t.filter(function (t) {\n    return t.d && t.top !== -9999;\n  }).forEach(function (t) {\n    t.change = NODE_CHANGE_POSITION;\n    t.top = -9999;\n  });\n};\n\nvar doRender = function doRender(t, e, i, r) {\n  var n = Array.from(t.children).filter(function (t) {\n    return t.tagName !== \"TEMPLATE\";\n  });\n  var s = n.length;\n  var a;\n\n  for (var o = 0; o < i.length; o++) {\n    var l = i[o];\n    var h = l.cell;\n\n    if (l.change === NODE_CHANGE_CELL) {\n      if (o < s) {\n        a = n[o];\n        e(a, h, o);\n      } else {\n        var c = createNode(t, h.type);\n        a = e(c, h, o) || c;\n        a.classList.add(\"virtual-item\");\n        t.appendChild(a);\n      }\n\n      a[\"$ionCell\"] = h;\n    } else {\n      a = n[o];\n    }\n\n    if (l.change !== NODE_CHANGE_NONE) {\n      a.style.transform = \"translate3d(0,\" + l.top + \"px,0)\";\n    }\n\n    var u = h.visible;\n\n    if (l.visible !== u) {\n      if (u) {\n        a.classList.remove(\"virtual-loading\");\n      } else {\n        a.classList.add(\"virtual-loading\");\n      }\n\n      l.visible = u;\n    }\n\n    if (h.reads > 0) {\n      r(h, a);\n      h.reads--;\n    }\n  }\n};\n\nvar createNode = function createNode(t, e) {\n  var i = getTemplate(t, e);\n\n  if (i && t.ownerDocument) {\n    return t.ownerDocument.importNode(i.content, true).children[0];\n  }\n\n  return null;\n};\n\nvar getTemplate = function getTemplate(t, e) {\n  switch (e) {\n    case CELL_TYPE_ITEM:\n      return t.querySelector(\"template:not([name])\");\n\n    case CELL_TYPE_HEADER:\n      return t.querySelector(\"template[name=header]\");\n\n    case CELL_TYPE_FOOTER:\n      return t.querySelector(\"template[name=footer]\");\n  }\n};\n\nvar getViewport = function getViewport(t, e, i) {\n  return {\n    top: Math.max(t - i, 0),\n    bottom: t + e + i\n  };\n};\n\nvar getRange = function getRange(t, e, i) {\n  var r = e.top;\n  var n = e.bottom;\n  var s = 0;\n\n  for (; s < t.length; s++) {\n    if (t[s] > r) {\n      break;\n    }\n  }\n\n  var a = Math.max(s - i - 1, 0);\n\n  for (; s < t.length; s++) {\n    if (t[s] >= n) {\n      break;\n    }\n  }\n\n  var o = Math.min(s + i, t.length);\n  var l = o - a;\n  return {\n    offset: a,\n    length: l\n  };\n};\n\nvar getShouldUpdate = function getShouldUpdate(t, e, i) {\n  var r = i.offset + i.length;\n  return t <= r || e.offset !== i.offset || e.length !== i.length;\n};\n\nvar findCellIndex = function findCellIndex(t, e) {\n  var i = t.length > 0 ? t[t.length - 1].index : 0;\n\n  if (e === 0) {\n    return 0;\n  } else if (e === i + 1) {\n    return t.length;\n  } else {\n    return t.findIndex(function (t) {\n      return t.index === e;\n    });\n  }\n};\n\nvar inplaceUpdate = function inplaceUpdate(t, e, i) {\n  if (i === 0 && e.length >= t.length) {\n    return e;\n  }\n\n  for (var r = 0; r < e.length; r++) {\n    t[r + i] = e[r];\n  }\n\n  return t;\n};\n\nvar calcCells = function calcCells(t, e, i, r, n, s, a, o, l, h, c, u) {\n  var f = [];\n  var d = u + c;\n\n  for (var p = c; p < d; p++) {\n    var v = t[p];\n\n    if (n) {\n      var g = n(v, p, t);\n\n      if (g != null) {\n        f.push({\n          i: h++,\n          type: CELL_TYPE_HEADER,\n          value: g,\n          index: p,\n          height: i ? i(g, p) : a,\n          reads: i ? 0 : MIN_READS,\n          visible: !!i\n        });\n      }\n    }\n\n    f.push({\n      i: h++,\n      type: CELL_TYPE_ITEM,\n      value: v,\n      index: p,\n      height: e ? e(v, p) : l,\n      reads: e ? 0 : MIN_READS,\n      visible: !!e\n    });\n\n    if (s) {\n      var g = s(v, p, t);\n\n      if (g != null) {\n        f.push({\n          i: h++,\n          type: CELL_TYPE_FOOTER,\n          value: g,\n          index: p,\n          height: r ? r(g, p) : o,\n          reads: r ? 0 : MIN_READS,\n          visible: !!r\n        });\n      }\n    }\n  }\n\n  return f;\n};\n\nvar calcHeightIndex = function calcHeightIndex(t, e, i) {\n  var r = t[i];\n\n  for (var n = i; n < t.length; n++) {\n    t[n] = r;\n    r += e[n].height;\n  }\n\n  return r;\n};\n\nvar resizeBuffer = function resizeBuffer(t, e) {\n  if (!t) {\n    return new Uint32Array(e);\n  }\n\n  if (t.length === e) {\n    return t;\n  } else if (e > t.length) {\n    var i = new Uint32Array(e);\n    i.set(t);\n    return i;\n  } else {\n    return t.subarray(0, e);\n  }\n};\n\nvar positionForIndex = function positionForIndex(t, e, i) {\n  var r = e.find(function (e) {\n    return e.type === CELL_TYPE_ITEM && e.index === t;\n  });\n\n  if (r) {\n    return i[r.i];\n  }\n\n  return -1;\n};\n\nvar virtualScrollCss = \"ion-virtual-scroll{display:block;position:relative;width:100%;contain:strict;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}ion-virtual-scroll>.virtual-loading{opacity:0}ion-virtual-scroll>.virtual-item{position:absolute !important;top:0 !important;right:0 !important;left:0 !important;-webkit-transition-duration:0ms;transition-duration:0ms;will-change:transform}\";\n\nvar VirtualScroll = function () {\n  function t(t) {\n    var e = this;\n    registerInstance(this, t);\n    this.range = {\n      offset: 0,\n      length: 0\n    };\n    this.viewportHeight = 0;\n    this.cells = [];\n    this.virtualDom = [];\n    this.isEnabled = false;\n    this.viewportOffset = 0;\n    this.currentScrollTop = 0;\n    this.indexDirty = 0;\n    this.lastItemLen = 0;\n    this.totalHeight = 0;\n    this.approxItemHeight = 45;\n    this.approxHeaderHeight = 30;\n    this.approxFooterHeight = 30;\n\n    this.onScroll = function () {\n      e.updateVirtualScroll();\n    };\n  }\n\n  t.prototype.itemsChanged = function () {\n    this.calcCells();\n    this.updateVirtualScroll();\n  };\n\n  t.prototype.connectedCallback = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      var t, e;\n      return __generator(this, function (i) {\n        switch (i.label) {\n          case 0:\n            t = this.el.closest(\"ion-content\");\n\n            if (!t) {\n              console.error(\"<ion-virtual-scroll> must be used inside an <ion-content>\");\n              return [2];\n            }\n\n            e = this;\n            return [4, t.getScrollElement()];\n\n          case 1:\n            e.scrollEl = i.sent();\n            this.contentEl = t;\n            this.calcCells();\n            this.updateState();\n            return [2];\n        }\n      });\n    });\n  };\n\n  t.prototype.componentDidUpdate = function () {\n    this.updateState();\n  };\n\n  t.prototype.disconnectedCallback = function () {\n    this.scrollEl = undefined;\n  };\n\n  t.prototype.onResize = function () {\n    this.calcCells();\n    this.updateVirtualScroll();\n  };\n\n  t.prototype.positionForItem = function (t) {\n    return Promise.resolve(positionForIndex(t, this.cells, this.getHeightIndex()));\n  };\n\n  t.prototype.checkRange = function (t, e) {\n    if (e === void 0) {\n      e = -1;\n    }\n\n    return __awaiter(this, void 0, void 0, function () {\n      var i, r, n;\n      return __generator(this, function (s) {\n        if (!this.items) {\n          return [2];\n        }\n\n        i = e === -1 ? this.items.length - t : e;\n        r = findCellIndex(this.cells, t);\n        n = calcCells(this.items, this.itemHeight, this.headerHeight, this.footerHeight, this.headerFn, this.footerFn, this.approxHeaderHeight, this.approxFooterHeight, this.approxItemHeight, r, t, i);\n        this.cells = inplaceUpdate(this.cells, n, r);\n        this.lastItemLen = this.items.length;\n        this.indexDirty = Math.max(t - 1, 0);\n        this.scheduleUpdate();\n        return [2];\n      });\n    });\n  };\n\n  t.prototype.checkEnd = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (t) {\n        if (this.items) {\n          this.checkRange(this.lastItemLen);\n        }\n\n        return [2];\n      });\n    });\n  };\n\n  t.prototype.updateVirtualScroll = function () {\n    if (!this.isEnabled || !this.scrollEl) {\n      return;\n    }\n\n    if (this.timerUpdate) {\n      clearTimeout(this.timerUpdate);\n      this.timerUpdate = undefined;\n    }\n\n    readTask(this.readVS.bind(this));\n    writeTask(this.writeVS.bind(this));\n  };\n\n  t.prototype.readVS = function () {\n    var t = this,\n        e = t.contentEl,\n        i = t.scrollEl,\n        r = t.el;\n    var n = 0;\n    var s = r;\n\n    while (s && s !== e) {\n      n += s.offsetTop;\n      s = s.offsetParent;\n    }\n\n    this.viewportOffset = n;\n\n    if (i) {\n      this.viewportHeight = i.offsetHeight;\n      this.currentScrollTop = i.scrollTop;\n    }\n  };\n\n  t.prototype.writeVS = function () {\n    var t = this.indexDirty;\n    var e = this.currentScrollTop - this.viewportOffset;\n    var i = getViewport(e, this.viewportHeight, 100);\n    var r = this.getHeightIndex();\n    var n = getRange(r, i, 2);\n    var s = getShouldUpdate(t, this.range, n);\n\n    if (!s) {\n      return;\n    }\n\n    this.range = n;\n    updateVDom(this.virtualDom, r, this.cells, n);\n\n    if (this.nodeRender) {\n      doRender(this.el, this.nodeRender, this.virtualDom, this.updateCellHeight.bind(this));\n    } else if (this.domRender) {\n      this.domRender(this.virtualDom);\n    } else if (this.renderItem) {\n      forceUpdate(this);\n    }\n  };\n\n  t.prototype.updateCellHeight = function (t, e) {\n    var i = this;\n\n    var r = function r() {\n      if (e[\"$ionCell\"] === t) {\n        var r = window.getComputedStyle(e);\n        var n = e.offsetHeight + parseFloat(r.getPropertyValue(\"margin-bottom\"));\n        i.setCellHeight(t, n);\n      }\n    };\n\n    if (e && e.componentOnReady) {\n      e.componentOnReady().then(r);\n    } else {\n      r();\n    }\n  };\n\n  t.prototype.setCellHeight = function (t, e) {\n    var i = t.i;\n\n    if (t !== this.cells[i]) {\n      return;\n    }\n\n    if (t.height !== e || t.visible !== true) {\n      t.visible = true;\n      t.height = e;\n      this.indexDirty = Math.min(this.indexDirty, i);\n      this.scheduleUpdate();\n    }\n  };\n\n  t.prototype.scheduleUpdate = function () {\n    var t = this;\n    clearTimeout(this.timerUpdate);\n    this.timerUpdate = setTimeout(function () {\n      return t.updateVirtualScroll();\n    }, 100);\n  };\n\n  t.prototype.updateState = function () {\n    var t = !!(this.scrollEl && this.cells);\n\n    if (t !== this.isEnabled) {\n      this.enableScrollEvents(t);\n\n      if (t) {\n        this.updateVirtualScroll();\n      }\n    }\n  };\n\n  t.prototype.calcCells = function () {\n    if (!this.items) {\n      return;\n    }\n\n    this.lastItemLen = this.items.length;\n    this.cells = calcCells(this.items, this.itemHeight, this.headerHeight, this.footerHeight, this.headerFn, this.footerFn, this.approxHeaderHeight, this.approxFooterHeight, this.approxItemHeight, 0, 0, this.lastItemLen);\n    this.indexDirty = 0;\n  };\n\n  t.prototype.getHeightIndex = function () {\n    if (this.indexDirty !== Infinity) {\n      this.calcHeightIndex(this.indexDirty);\n    }\n\n    return this.heightIndex;\n  };\n\n  t.prototype.calcHeightIndex = function (t) {\n    if (t === void 0) {\n      t = 0;\n    }\n\n    this.heightIndex = resizeBuffer(this.heightIndex, this.cells.length);\n    this.totalHeight = calcHeightIndex(this.heightIndex, this.cells, t);\n    this.indexDirty = Infinity;\n  };\n\n  t.prototype.enableScrollEvents = function (t) {\n    var e = this;\n\n    if (this.rmEvent) {\n      this.rmEvent();\n      this.rmEvent = undefined;\n    }\n\n    var i = this.scrollEl;\n\n    if (i) {\n      this.isEnabled = t;\n      i.addEventListener(\"scroll\", this.onScroll);\n\n      this.rmEvent = function () {\n        i.removeEventListener(\"scroll\", e.onScroll);\n      };\n    }\n  };\n\n  t.prototype.renderVirtualNode = function (t) {\n    var e = t.cell,\n        i = e.type,\n        r = e.value,\n        n = e.index;\n\n    switch (i) {\n      case CELL_TYPE_ITEM:\n        return this.renderItem(r, n);\n\n      case CELL_TYPE_HEADER:\n        return this.renderHeader(r, n);\n\n      case CELL_TYPE_FOOTER:\n        return this.renderFooter(r, n);\n    }\n  };\n\n  t.prototype.render = function () {\n    var t = this;\n    return h(Host, {\n      style: {\n        height: this.totalHeight + \"px\"\n      }\n    }, this.renderItem && h(VirtualProxy, {\n      dom: this.virtualDom\n    }, this.virtualDom.map(function (e) {\n      return t.renderVirtualNode(e);\n    })));\n  };\n\n  Object.defineProperty(t.prototype, \"el\", {\n    get: function get() {\n      return getElement(this);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(t, \"watchers\", {\n    get: function get() {\n      return {\n        itemHeight: [\"itemsChanged\"],\n        headerHeight: [\"itemsChanged\"],\n        footerHeight: [\"itemsChanged\"],\n        items: [\"itemsChanged\"]\n      };\n    },\n    enumerable: false,\n    configurable: true\n  });\n  return t;\n}();\n\nvar VirtualProxy = function VirtualProxy(t, e, i) {\n  var r = t.dom;\n  return i.map(e, function (t, e) {\n    var i = r[e];\n    var n = t.vattrs || {};\n    var s = n.class || \"\";\n    s += \"virtual-item \";\n\n    if (!i.visible) {\n      s += \"virtual-loading\";\n    }\n\n    return Object.assign(Object.assign({}, t), {\n      vattrs: Object.assign(Object.assign({}, n), {\n        class: s,\n        style: Object.assign(Object.assign({}, n.style), {\n          transform: \"translate3d(0,\" + i.top + \"px,0)\"\n        })\n      })\n    });\n  });\n};\n\nVirtualScroll.style = virtualScrollCss;\nexport { VirtualScroll as ion_virtual_scroll };","map":{"version":3,"sources":["/Users/jan/Documents/filen/app/node_modules/@ionic/core/dist/esm-es5/ion-virtual-scroll.entry.js"],"names":["__awaiter","__generator","r","registerInstance","f","readTask","c","writeTask","j","forceUpdate","h","H","Host","i","getElement","CELL_TYPE_ITEM","CELL_TYPE_HEADER","CELL_TYPE_FOOTER","NODE_CHANGE_NONE","NODE_CHANGE_POSITION","NODE_CHANGE_CELL","MIN_READS","updateVDom","t","e","n","s","length","a","change","d","o","l","offset","find","cell","top","push","u","filter","type","visible","p","v","forEach","doRender","Array","from","children","tagName","createNode","classList","add","appendChild","style","transform","remove","reads","getTemplate","ownerDocument","importNode","content","querySelector","getViewport","Math","max","bottom","getRange","min","getShouldUpdate","findCellIndex","index","findIndex","inplaceUpdate","calcCells","g","value","height","calcHeightIndex","resizeBuffer","Uint32Array","set","subarray","positionForIndex","virtualScrollCss","VirtualScroll","range","viewportHeight","cells","virtualDom","isEnabled","viewportOffset","currentScrollTop","indexDirty","lastItemLen","totalHeight","approxItemHeight","approxHeaderHeight","approxFooterHeight","onScroll","updateVirtualScroll","prototype","itemsChanged","connectedCallback","label","el","closest","console","error","getScrollElement","scrollEl","sent","contentEl","updateState","componentDidUpdate","disconnectedCallback","undefined","onResize","positionForItem","Promise","resolve","getHeightIndex","checkRange","items","itemHeight","headerHeight","footerHeight","headerFn","footerFn","scheduleUpdate","checkEnd","timerUpdate","clearTimeout","readVS","bind","writeVS","offsetTop","offsetParent","offsetHeight","scrollTop","nodeRender","updateCellHeight","domRender","renderItem","window","getComputedStyle","parseFloat","getPropertyValue","setCellHeight","componentOnReady","then","setTimeout","enableScrollEvents","Infinity","heightIndex","rmEvent","addEventListener","removeEventListener","renderVirtualNode","renderHeader","renderFooter","render","VirtualProxy","dom","map","Object","defineProperty","get","enumerable","configurable","vattrs","class","assign","ion_virtual_scroll"],"mappings":"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","sourcesContent":["import{__awaiter,__generator}from\"tslib\";import{r as registerInstance,f as readTask,c as writeTask,j as forceUpdate,h,H as Host,i as getElement}from\"./index-e806d1f6.js\";var CELL_TYPE_ITEM=\"item\";var CELL_TYPE_HEADER=\"header\";var CELL_TYPE_FOOTER=\"footer\";var NODE_CHANGE_NONE=0;var NODE_CHANGE_POSITION=1;var NODE_CHANGE_CELL=2;var MIN_READS=2;var updateVDom=function(t,e,i,r){for(var n=0,s=t;n<s.length;n++){var a=s[n];a.change=NODE_CHANGE_NONE;a.d=true}var o=[];var l=r.offset+r.length;var h=function(r){var n=i[r];var s=t.find((function(t){return t.d&&t.cell===n}));if(s){var a=e[r];if(a!==s.top){s.top=a;s.change=NODE_CHANGE_POSITION}s.d=false}else{o.push(n)}};for(var c=r.offset;c<l;c++){h(c)}var u=t.filter((function(t){return t.d}));var f=function(i){var r=u.find((function(t){return t.d&&t.cell.type===i.type}));var n=i.i;if(r){r.d=false;r.change=NODE_CHANGE_CELL;r.cell=i;r.top=e[n]}else{t.push({d:false,cell:i,visible:true,change:NODE_CHANGE_CELL,top:e[n]})}};for(var d=0,p=o;d<p.length;d++){var v=p[d];f(v)}t.filter((function(t){return t.d&&t.top!==-9999})).forEach((function(t){t.change=NODE_CHANGE_POSITION;t.top=-9999}))};var doRender=function(t,e,i,r){var n=Array.from(t.children).filter((function(t){return t.tagName!==\"TEMPLATE\"}));var s=n.length;var a;for(var o=0;o<i.length;o++){var l=i[o];var h=l.cell;if(l.change===NODE_CHANGE_CELL){if(o<s){a=n[o];e(a,h,o)}else{var c=createNode(t,h.type);a=e(c,h,o)||c;a.classList.add(\"virtual-item\");t.appendChild(a)}a[\"$ionCell\"]=h}else{a=n[o]}if(l.change!==NODE_CHANGE_NONE){a.style.transform=\"translate3d(0,\"+l.top+\"px,0)\"}var u=h.visible;if(l.visible!==u){if(u){a.classList.remove(\"virtual-loading\")}else{a.classList.add(\"virtual-loading\")}l.visible=u}if(h.reads>0){r(h,a);h.reads--}}};var createNode=function(t,e){var i=getTemplate(t,e);if(i&&t.ownerDocument){return t.ownerDocument.importNode(i.content,true).children[0]}return null};var getTemplate=function(t,e){switch(e){case CELL_TYPE_ITEM:return t.querySelector(\"template:not([name])\");case CELL_TYPE_HEADER:return t.querySelector(\"template[name=header]\");case CELL_TYPE_FOOTER:return t.querySelector(\"template[name=footer]\")}};var getViewport=function(t,e,i){return{top:Math.max(t-i,0),bottom:t+e+i}};var getRange=function(t,e,i){var r=e.top;var n=e.bottom;var s=0;for(;s<t.length;s++){if(t[s]>r){break}}var a=Math.max(s-i-1,0);for(;s<t.length;s++){if(t[s]>=n){break}}var o=Math.min(s+i,t.length);var l=o-a;return{offset:a,length:l}};var getShouldUpdate=function(t,e,i){var r=i.offset+i.length;return t<=r||e.offset!==i.offset||e.length!==i.length};var findCellIndex=function(t,e){var i=t.length>0?t[t.length-1].index:0;if(e===0){return 0}else if(e===i+1){return t.length}else{return t.findIndex((function(t){return t.index===e}))}};var inplaceUpdate=function(t,e,i){if(i===0&&e.length>=t.length){return e}for(var r=0;r<e.length;r++){t[r+i]=e[r]}return t};var calcCells=function(t,e,i,r,n,s,a,o,l,h,c,u){var f=[];var d=u+c;for(var p=c;p<d;p++){var v=t[p];if(n){var g=n(v,p,t);if(g!=null){f.push({i:h++,type:CELL_TYPE_HEADER,value:g,index:p,height:i?i(g,p):a,reads:i?0:MIN_READS,visible:!!i})}}f.push({i:h++,type:CELL_TYPE_ITEM,value:v,index:p,height:e?e(v,p):l,reads:e?0:MIN_READS,visible:!!e});if(s){var g=s(v,p,t);if(g!=null){f.push({i:h++,type:CELL_TYPE_FOOTER,value:g,index:p,height:r?r(g,p):o,reads:r?0:MIN_READS,visible:!!r})}}}return f};var calcHeightIndex=function(t,e,i){var r=t[i];for(var n=i;n<t.length;n++){t[n]=r;r+=e[n].height}return r};var resizeBuffer=function(t,e){if(!t){return new Uint32Array(e)}if(t.length===e){return t}else if(e>t.length){var i=new Uint32Array(e);i.set(t);return i}else{return t.subarray(0,e)}};var positionForIndex=function(t,e,i){var r=e.find((function(e){return e.type===CELL_TYPE_ITEM&&e.index===t}));if(r){return i[r.i]}return-1};var virtualScrollCss=\"ion-virtual-scroll{display:block;position:relative;width:100%;contain:strict;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}ion-virtual-scroll>.virtual-loading{opacity:0}ion-virtual-scroll>.virtual-item{position:absolute !important;top:0 !important;right:0 !important;left:0 !important;-webkit-transition-duration:0ms;transition-duration:0ms;will-change:transform}\";var VirtualScroll=function(){function t(t){var e=this;registerInstance(this,t);this.range={offset:0,length:0};this.viewportHeight=0;this.cells=[];this.virtualDom=[];this.isEnabled=false;this.viewportOffset=0;this.currentScrollTop=0;this.indexDirty=0;this.lastItemLen=0;this.totalHeight=0;this.approxItemHeight=45;this.approxHeaderHeight=30;this.approxFooterHeight=30;this.onScroll=function(){e.updateVirtualScroll()}}t.prototype.itemsChanged=function(){this.calcCells();this.updateVirtualScroll()};t.prototype.connectedCallback=function(){return __awaiter(this,void 0,void 0,(function(){var t,e;return __generator(this,(function(i){switch(i.label){case 0:t=this.el.closest(\"ion-content\");if(!t){console.error(\"<ion-virtual-scroll> must be used inside an <ion-content>\");return[2]}e=this;return[4,t.getScrollElement()];case 1:e.scrollEl=i.sent();this.contentEl=t;this.calcCells();this.updateState();return[2]}}))}))};t.prototype.componentDidUpdate=function(){this.updateState()};t.prototype.disconnectedCallback=function(){this.scrollEl=undefined};t.prototype.onResize=function(){this.calcCells();this.updateVirtualScroll()};t.prototype.positionForItem=function(t){return Promise.resolve(positionForIndex(t,this.cells,this.getHeightIndex()))};t.prototype.checkRange=function(t,e){if(e===void 0){e=-1}return __awaiter(this,void 0,void 0,(function(){var i,r,n;return __generator(this,(function(s){if(!this.items){return[2]}i=e===-1?this.items.length-t:e;r=findCellIndex(this.cells,t);n=calcCells(this.items,this.itemHeight,this.headerHeight,this.footerHeight,this.headerFn,this.footerFn,this.approxHeaderHeight,this.approxFooterHeight,this.approxItemHeight,r,t,i);this.cells=inplaceUpdate(this.cells,n,r);this.lastItemLen=this.items.length;this.indexDirty=Math.max(t-1,0);this.scheduleUpdate();return[2]}))}))};t.prototype.checkEnd=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){if(this.items){this.checkRange(this.lastItemLen)}return[2]}))}))};t.prototype.updateVirtualScroll=function(){if(!this.isEnabled||!this.scrollEl){return}if(this.timerUpdate){clearTimeout(this.timerUpdate);this.timerUpdate=undefined}readTask(this.readVS.bind(this));writeTask(this.writeVS.bind(this))};t.prototype.readVS=function(){var t=this,e=t.contentEl,i=t.scrollEl,r=t.el;var n=0;var s=r;while(s&&s!==e){n+=s.offsetTop;s=s.offsetParent}this.viewportOffset=n;if(i){this.viewportHeight=i.offsetHeight;this.currentScrollTop=i.scrollTop}};t.prototype.writeVS=function(){var t=this.indexDirty;var e=this.currentScrollTop-this.viewportOffset;var i=getViewport(e,this.viewportHeight,100);var r=this.getHeightIndex();var n=getRange(r,i,2);var s=getShouldUpdate(t,this.range,n);if(!s){return}this.range=n;updateVDom(this.virtualDom,r,this.cells,n);if(this.nodeRender){doRender(this.el,this.nodeRender,this.virtualDom,this.updateCellHeight.bind(this))}else if(this.domRender){this.domRender(this.virtualDom)}else if(this.renderItem){forceUpdate(this)}};t.prototype.updateCellHeight=function(t,e){var i=this;var r=function(){if(e[\"$ionCell\"]===t){var r=window.getComputedStyle(e);var n=e.offsetHeight+parseFloat(r.getPropertyValue(\"margin-bottom\"));i.setCellHeight(t,n)}};if(e&&e.componentOnReady){e.componentOnReady().then(r)}else{r()}};t.prototype.setCellHeight=function(t,e){var i=t.i;if(t!==this.cells[i]){return}if(t.height!==e||t.visible!==true){t.visible=true;t.height=e;this.indexDirty=Math.min(this.indexDirty,i);this.scheduleUpdate()}};t.prototype.scheduleUpdate=function(){var t=this;clearTimeout(this.timerUpdate);this.timerUpdate=setTimeout((function(){return t.updateVirtualScroll()}),100)};t.prototype.updateState=function(){var t=!!(this.scrollEl&&this.cells);if(t!==this.isEnabled){this.enableScrollEvents(t);if(t){this.updateVirtualScroll()}}};t.prototype.calcCells=function(){if(!this.items){return}this.lastItemLen=this.items.length;this.cells=calcCells(this.items,this.itemHeight,this.headerHeight,this.footerHeight,this.headerFn,this.footerFn,this.approxHeaderHeight,this.approxFooterHeight,this.approxItemHeight,0,0,this.lastItemLen);this.indexDirty=0};t.prototype.getHeightIndex=function(){if(this.indexDirty!==Infinity){this.calcHeightIndex(this.indexDirty)}return this.heightIndex};t.prototype.calcHeightIndex=function(t){if(t===void 0){t=0}this.heightIndex=resizeBuffer(this.heightIndex,this.cells.length);this.totalHeight=calcHeightIndex(this.heightIndex,this.cells,t);this.indexDirty=Infinity};t.prototype.enableScrollEvents=function(t){var e=this;if(this.rmEvent){this.rmEvent();this.rmEvent=undefined}var i=this.scrollEl;if(i){this.isEnabled=t;i.addEventListener(\"scroll\",this.onScroll);this.rmEvent=function(){i.removeEventListener(\"scroll\",e.onScroll)}}};t.prototype.renderVirtualNode=function(t){var e=t.cell,i=e.type,r=e.value,n=e.index;switch(i){case CELL_TYPE_ITEM:return this.renderItem(r,n);case CELL_TYPE_HEADER:return this.renderHeader(r,n);case CELL_TYPE_FOOTER:return this.renderFooter(r,n)}};t.prototype.render=function(){var t=this;return h(Host,{style:{height:this.totalHeight+\"px\"}},this.renderItem&&h(VirtualProxy,{dom:this.virtualDom},this.virtualDom.map((function(e){return t.renderVirtualNode(e)}))))};Object.defineProperty(t.prototype,\"el\",{get:function(){return getElement(this)},enumerable:false,configurable:true});Object.defineProperty(t,\"watchers\",{get:function(){return{itemHeight:[\"itemsChanged\"],headerHeight:[\"itemsChanged\"],footerHeight:[\"itemsChanged\"],items:[\"itemsChanged\"]}},enumerable:false,configurable:true});return t}();var VirtualProxy=function(t,e,i){var r=t.dom;return i.map(e,(function(t,e){var i=r[e];var n=t.vattrs||{};var s=n.class||\"\";s+=\"virtual-item \";if(!i.visible){s+=\"virtual-loading\"}return Object.assign(Object.assign({},t),{vattrs:Object.assign(Object.assign({},n),{class:s,style:Object.assign(Object.assign({},n.style),{transform:\"translate3d(0,\"+i.top+\"px,0)\"})})})}))};VirtualScroll.style=virtualScrollCss;export{VirtualScroll as ion_virtual_scroll};"]},"metadata":{},"sourceType":"module"}